{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","_frontapp/app.js","app.js","_frontapp/frontpage.js","_frontapp/newsletter.js","_frontapp/slack-invite.js","_frontapp/util.js","node_modules/calendarth/src/calendarth.js","node_modules/calendarth/src/index.js","node_modules/calendarth/src/item.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","Front","SlackApp","front","init","slackApp","email_container","cta","./frontpage","./newsletter","./slack-invite",2,"calendarth","util","this","$agendaContainer","$agendaItem","$error","MAX_EVENTS_SHOW","prototype","$","apiKey","calendarId","maxResults","fetch","_handleCalResult","bind","err","data","empty","append","clone","removeClass","meetups","displayed","lineCounter","htmlOutput","items","forEach","item","indexOf","summary","push","_assignValues","$item","console","log","find","addClass","text","_parseDesc","description","getDate","start","getTime","location","locationOutput","venue","substr","mapUrl","html","infoUrl","attr","about","descr","out","language","rest","lines","split","line","splitPos","key","toLowerCase","trim","value","./util",3,"newsletter","mceInit","options","url","type","dataType","contentType","submit","ev","hide","preventDefault","email","EMAIL","serialize","success","resp","mceSuccess","ajax","result","msg","index","parts","undefined","parseInt","toString","show",4,"Slack","TOKEN","SUBSCRIBE_URL","$emailEl","$ctaEl","attachEvents","that","on","val","subscribe","cb","test","method","token","set_active","res","error",5,"days","months","nl2br","str","join","formatDate","end","startDate","endDate","isMultiDay","dateTime","Date","date","getDay","getMonth","getHours","twoDigit","getMinutes","dt","num",6,"Item","Calendarth","calendarUrl","toISOString","crossDomain","done","fail","jqXHR","textStatus","errorThrown","getEventUrl","eventItem","linkParts","htmlLink","encodeURIComponent","organizer","./item",7,"./calendarth",8,"calendarObj","get","optProp"],"mappings":"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","file":"app.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/*\n * SKGTech\n * Thessaloniki Tech Community\n * https://github.com/skgtech/skgtech.github.io\n *\n * Copyright Â©2015 SKGTech Contributors.\n * Licensed under the MIT license.\n */\n/**\n * @fileOverview Frontend application bootstrap file\n */\n\nvar Front = require('./frontpage');\nvar SlackApp = require('./slack-invite');\nrequire('./newsletter');\n\nvar front = new Front();\nfront.init();\n\nvar slackApp = new SlackApp();\nslackApp.init({\n  email_container: '.slack-subscribe-email',\n  cta: '.slack-subscribe-button'\n});\n",null,"/**\n * @fileOverview scripts about the frontpage.\n */\n\nvar calendarth = require('calendarth');\n\nvar util = require('./util');\n\nvar Front = module.exports = function() {\n  this.$agendaContainer = null;\n  this.$agendaItem = null;\n  this.$error = null;\n};\n\n/** @const {number} Maximum events to display, use an even number */\nFront.MAX_EVENTS_SHOW = 8;\n\n/**\n * Initialize the frontpage view.\n *\n */\nFront.prototype.init = function() {\n  this.$agendaContainer = $('#agenda-items');\n  this.$agendaItem = $('#agenda-tpl');\n  this.$error = $('#agenda-error');\n\n  this.calendarth = calendarth({\n    apiKey: 'AIzaSyC75rnKyEkGxmVyG7hlqFicwPBgDmQLN_w',\n    calendarId: '2ul10sd9g30mnk1vpmcnnp5qv4@group.calendar.google.com',\n    maxResults: 12\n  });\n\n  this.calendarth.fetch(this._handleCalResult.bind(this));\n\n};\n\n/**\n * Handle incoming calendarth data.\n *\n * @param {?string|Error} err Possible error message.\n * @param {Object=} data The calendar data object.\n * @private\n */\nFront.prototype._handleCalResult = function(err, data) {\n  this.$agendaContainer.empty();\n  if (err) {\n    this.$agendaContainer.append(this.$error.clone().removeClass('hide'));\n    return;\n  }\n\n  var meetups = [];\n  var displayed = 0;\n  var lineCounter = 0;\n  var htmlOutput = '';\n  data.items.forEach(function(item) {\n    if (displayed >= Front.MAX_EVENTS_SHOW) {\n      return;\n    }\n\n    if (meetups.indexOf(item.summary) > -1) {\n      return;\n    } else {\n      meetups.push(item.summary);\n    }\n\n    if (displayed && displayed % 2 === 0) {\n      // rows\n      // htmlOutput += '</div><div class=\"row\">';\n    }\n    htmlOutput += this._assignValues(this.$agendaItem.clone(), item, lineCounter);\n    displayed++;\n    lineCounter++;\n    if (lineCounter > 2) {\n      lineCounter = 0;\n    }\n  }, this);\n\n  htmlOutput += '';\n  this.$agendaContainer.append(htmlOutput);\n};\n\n/**\n * Assign the Calendar item values to the Calendar item element.\n *\n * @param {jQuery} $item A jquery item we will manipulate.\n * @param {Object} item Google Calendar item.\n * @param {number} lineCounter The current line counter.\n * @return {string} The html representation.\n * @private\n */\nFront.prototype._assignValues = function($item, item, lineCounter) {\n  $item.removeClass('hide');\n\n  console.log('WTF:', $item.find('article.calendar-entry'));\n  $item.find('article.calendar-entry').addClass('calendar-entry-' + lineCounter);\n  $item.find('.title').addClass('title-' + lineCounter);\n\n  $item.find('.title').text(item.summary);\n\n  var data = this._parseDesc(item.description);\n\n  $item.find('.date').text(util.getDate(item.start));\n  $item.find('.time').text(util.getTime(item.start));\n\n  var location = null;\n  var locationOutput = '';\n  if (data.venue) {\n    location = data.venue;\n  } else {\n    location = item.location;\n  }\n\n  // chop down length\n  if (location.length > 12) {\n    location = location.substr(0, 9) + '...';\n  }\n\n  if (data.mapUrl) {\n    locationOutput = '<a href=\"' + data.mapUrl + '\" target=\"_blank\">';\n    locationOutput += location;\n    locationOutput += '</a>';\n  } else {\n    locationOutput = location;\n  }\n\n\n  $item.find('.location-name').html(locationOutput);\n\n  if (data.infoUrl) {\n    $item.find('.more-info').attr('href', data.infoUrl);\n  } else {\n    $item.find('.more-info').addClass('hide');\n  }\n\n  if (data.about) {\n    $item.find('.details p').html(data.about);\n  } else {\n    $item.find('.details').addClass('hide');\n  }\n\n  return $item.html();\n};\n\n/**\n * Parse the description and generated info.\n *\n * @param {string} descr The description\n * @return {Object} An object containing the following properties:\n *   venue {?string} The venue where the event happens or null.\n *   info {?string} The informational url or null.\n *   map {?string} The map url or null.\n *   language {?string} The event language.\n * @private\n */\nFront.prototype._parseDesc = function(descr) {\n  var out = {\n    venue: null,\n    infoUrl: null,\n    mapUrl: null,\n    about: null,\n    language: null,\n    rest: ''\n  };\n  if (!descr) {\n    return out;\n  }\n  var lines = descr.split('\\n');\n  lines.forEach(function(line) {\n    if (!line.length) {\n      return;\n    }\n\n    var splitPos = line.indexOf(':');\n    if (splitPos === -1) {\n      return;\n    }\n\n    var key = line.substr(0, splitPos).toLowerCase().trim();\n    var value = line.substr(splitPos + 1).trim();\n\n    switch(key) {\n    case 'venue':\n      out.venue = value;\n      break;\n    case 'info':\n      out.infoUrl = value;\n      break;\n    case 'map':\n      out.mapUrl = value;\n      break;\n    case 'about':\n      out.about = value;\n      break;\n    case 'language':\n      out.language = value;\n      break;\n    default:\n      out.rest += line + '<br />';\n      break;\n    }\n  }, this);\n\n  return out;\n};\n","/**\n * @fileOverview The newsletter js for MailChimp\n */\n'use strict';\n\n(function() {\n  var newsletter = {};\n  // mailchimp code\n  newsletter.mceInit = function() {\n    var options = {\n      url: 'https://datablaster.us2.list-manage.com/subscribe/post-json?u=249dbe460c3c1857a489dde05&amp;id=b926e92856&c=?',\n      type: 'GET',\n      dataType: 'json',\n      contentType: 'application/json; charset=utf-8'\n    };\n\n    $('#mc-embedded-subscribe-form').submit(function(ev){\n      $('.response').hide();\n      ev.preventDefault();\n\n      // form position\n      var email = this.EMAIL.value;\n      options.data = $(this).serialize();\n      options.success = function(resp) {\n        newsletter.mceSuccess(resp, email);\n      };\n\n      $.ajax(options);\n\n      return false;\n    });\n  };\n\n  newsletter.mceSuccess = function(resp) {\n    if (resp.result === 'success'){\n      // Show thank\n      $('#mc-embedded-subscribe-form').hide();\n      $('.thankyou').removeClass('hide');\n      return;\n    }\n\n    var index = -1;\n    var msg;\n    try {\n      var parts = resp.msg.split(' - ',2);\n      if (parts[1] === undefined){\n        msg = resp.msg;\n      } else {\n        var i = parseInt(parts[0], 10);\n        if (i.toString() === parts[0]){\n          index = parts[0];\n          msg = parts[1];\n        } else {\n          index = -1;\n          msg = resp.msg;\n        }\n      }\n    } catch(e) {\n      index = -1;\n      msg = resp.msg;\n    }\n    $('.js-error').show();\n    $('.js-error').html(msg);\n  };\n\n  newsletter.mceInit();\n})();\n","/**\n * @fileOverview scripts about the Slack Invitation form.\n */\n\nvar Slack = module.exports = function () {};\n\n/** @const {string} AUTH TOKEN */\nSlack.TOKEN = 'xoxp-3330967421-3332061266-7344001762-99c6a8';\n\n/** @const {string} API Endpoint to invite an email */\nSlack.SUBSCRIBE_URL = 'https://skgtech.slack.com/api/users.admin.invite';\n\n/**\n * Initialize the frontpage view.\n *\n */\nSlack.prototype.init = function (options) {\n\n  if(!options.email_container){\n    throw 'Must set an input element selector';\n  }\n  if(!options.cta){\n    throw 'Must set a Call to Action element selector';\n  }\n\n  this.$emailEl = $(options.email_container);\n  this.$ctaEl = $(options.cta);\n\n  this.attachEvents();\n};\n\nSlack.prototype.attachEvents = function () {\n  var that = this;\n  this.$ctaEl.on('click', function(e){\n    e.preventDefault();\n    var email = that.$emailEl.val();\n    that.subscribe(email, function(err){\n\n      if(err){\n        if(err === 'empty-email'){}\n        else if(err === 'wrong-email'){}\n\n        that.$emailEl.addClass('error');\n\n      } else {\n\n      }\n\n    });\n  });\n};\n\nSlack.prototype.subscribe = function (email, cb) {\n\n  if(!email || !email.length){\n    cb('empty-email');\n    return false;\n  } else if(!(/^([a-zA-Z0-9_.+-])+\\@(([a-zA-Z0-9-])+\\.)+([a-zA-Z0-9]{2,4})+$/.test(email))){\n    cb('wrong-email');\n    return false;\n  }\n\n  $.ajax({\n    method: 'POST',\n    url: Slack.SUBSCRIBE_URL,\n    data: {\n      email: email,\n      token: Slack.TOKEN,\n      set_active: true\n    }\n  })\n    .success(function (res) {\n      if(res.error){\n        if(res.error === 'already_in_team'){\n          cb('already_in_team');\n        }\n      } else {\n        cb(null);\n      }\n    })\n    .error(function (err) {\n      cb('err');\n    });\n\n};\n","/**\n * @fileOverview Utilities.\n */\nvar util = module.exports = {};\n\nvar days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sub'];\nvar months =['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n  'Oct', 'Nov', 'Dec'];\n\n/**\n * nl2br\n *\n * @param {string} str The string\n * @return {string}  A stirng with newlines turned to <br />\n */\nutil.nl2br = function(str) {\n  if (typeof str !== 'string') {\n    return '';\n  }\n\n  return str.split('\\n').join('<br />');\n};\n\n/**\n * Format a calendar start / end date to a single string\n *\n * @param {Object} start Start Object.\n * @param {Object} end End Object.\n * @return {string} Human readable string.\n */\nutil.formatDate = function(start, end) {\n  // check if we have a dateTime defined\n  var startDate;\n  var endDate;\n  var isMultiDay = false;\n  if (start.dateTime) {\n    startDate = new Date(start.dateTime);\n    endDate = new Date(end.dateTime);\n  } else {\n    isMultiDay = true;\n    startDate = new Date(start.date);\n    endDate = new Date(end.date);\n    // the substraction needs to happen because in Full Day events the end\n    // time will jump +3h because of timezone (+2) and DST (+1)\n    endDate = endDate - 11000000;\n    endDate = new Date(endDate);\n  }\n\n  // establish date\n  var out = days[startDate.getDay()];\n  out += ', ' + months[startDate.getMonth()];\n  out += ' ' + startDate.getDate();\n\n  if (isMultiDay) {\n    // multi-day event, check if it's just a single all-day\n    if (startDate.getDate() === endDate.getDate() && startDate.getMonth() ===\n      endDate.getMonth()) {\n      // single all day event\n      out += ', All day event';\n    } else {\n      // multi day\n      out += ' - ' + days[endDate.getDay()] + ' ' + endDate.getDate();\n    }\n  } else {\n    out += ' | ' + startDate.getHours() + ':' +\n      util.twoDigit(startDate.getMinutes());\n    out += ' - ' + endDate.getHours() + ':' +\n      util.twoDigit(endDate.getMinutes());\n  }\n\n  return out;\n};\n\n/**\n * Get the date out of a date format: dd MMM\n *\n * @param {Object} start Start Object.\n * @return {string} Human readable string.\n */\nutil.getDate = function(dt) {\n  // check if we have a dateTime defined\n  var startDate;\n  var isMultiDay = false;\n  if (dt.dateTime) {\n    startDate = new Date(dt.dateTime);\n  } else {\n    isMultiDay = true;\n    startDate = new Date(dt.date);\n  }\n\n  var out = '';\n  out += startDate.getDate();\n  out += ' ' + months[startDate.getMonth()];\n\n  return out;\n};\n\n/**\n * Get the time out of a date format: HH:MM\n *\n * @param {Object} start Start Object.\n * @return {string} Human readable string.\n */\nutil.getTime = function(dt) {\n  // check if we have a dateTime defined\n  var startDate;\n  var isMultiDay = false;\n  if (dt.dateTime) {\n    startDate = new Date(dt.dateTime);\n  } else {\n    isMultiDay = true;\n    startDate = new Date(dt.date);\n  }\n\n  var out = '';\n\n  if (isMultiDay) {\n    return 'All Day';\n  }\n\n  out += startDate.getHours();\n  out += ':' + util.twoDigit(startDate.getMinutes());\n};\n\n/**\n * Forces return of two digits by prepending 0 if length is 1.\n *\n * @param {number} num The number\n * @return {string} Two digit representation as string.\n */\nutil.twoDigit = function(num) {\n  var str = num + '';\n  if (str.length === 1) {\n    return '0' + str;\n  } else {\n    return str;\n  }\n};\n","/*\n * Calendarth\n * Fetch a Public Google Calendar with AJAX\n * https://github.com/thanpolas/calendarth\n *\n * Copyright (c) 2014 Thanasis Polychronakis\n * Licensed under the MIT license.\n */\n/**\n * @fileOverview Google Calendar client, fetches and parses calendar items.\n */\n\nvar Item = require('./item');\n\n/**\n * The base class.\n *\n * @param {Object} options A dict with options to configure the Calendarth:\n *    @param {string} calendarId REQUIRED the calendar Id, looks like:\n *        djasldj23ljd23dj23ldj2%40group.calendar.google.com\n *    @param {string} apiKey A google API v3 key.\n * @constructor\n */\nvar Calendarth = module.exports = function(options) {\n  this.options = options || {};\n  this.apiKey = this.options.apiKey || null;\n  this.calendarId = this.options.calendarId || null;\n  this.maxResults = this.options.maxResults || 20;\n};\n\n/**\n * Fetch Calendar items.\n *\n * @param {Function(Error, Array.<Calendarth.Item>)} cb Node style callback.\n * @see https://github.com/thanpolas/calendarth/wiki/Google_Calendar_Object_v3\n */\nCalendarth.prototype.fetch = function(cb) {\n  var calendarUrl = 'https://www.googleapis.com/calendar/v3/calendars/';\n  calendarUrl += this.calendarId + '/events?key=';\n  calendarUrl += this.apiKey;\n\n  var dt = new Date();\n  calendarUrl += '&orderBy=startTime';\n  calendarUrl += '&singleEvents=true';\n  calendarUrl += '&timeMin=' + dt.toISOString();\n  calendarUrl += '&maxResults=' + this.maxResults;\n  $.ajax({\n    type: 'GET',\n    url: calendarUrl,\n    crossDomain: true,\n    dataType: 'json'\n  }).done(function(data) {\n    var item = new Item(data);\n    cb(null, item);\n  }).fail(function(jqXHR, textStatus, errorThrown) {\n    cb(errorThrown);\n  });\n};\n\n/**\n * Return a url that will perform the \"Add Event to Google Calendar\" action.\n *\n * @param {Object} eventItem The event data object.\n * @return {string} The event link to use in the anchor element.\n */\nCalendarth.prototype.getEventUrl = function(eventItem) {\n  var linkParts = eventItem.htmlLink.split('=');\n  var out = 'http://www.google.com/calendar/event?action=TEMPLATE&tmeid=';\n  out += linkParts[1];\n  out += '&tmsrc=';\n  out += encodeURIComponent(eventItem.organizer.email);\n  return out;\n};\n","/**\n * @fileOverview Library Bootstrap.\n */\n\nvar Calendarth = require('./calendarth');\n\n/**\n * The exported API, return a new instance of Calendarth.\n *\n * @param {Object} options Options.\n * @return {Calendarth} A new instance of Calendarth.\n */\nmodule.exports = function(options) {\n  return new Calendarth(options);\n};\n","/**\n * @fileOverview A wrapper that provides helpers on the calendar object.\n */\n\n/**\n * A wrapper for the Google Calendar v3 Object.\n *\n * @param {Object} calendarObj The Google Calendar v3 Object.\n * @constructor\n */\nvar Item = module.exports = function(calendarObj) {\n  // stub return with same object for now...\n  return calendarObj;\n  // this.calendarObj = calendarObj;\n};\n\n/**\n * Get a property or the whole calendar object.\n * @param {string=} optProp optionally define a property.\n * @return {Object|*} The Object or whatever type the property value is.\n */\nItem.prototype.get = function(optProp) {\n  if (optProp) {\n    return this.calendarObj[optProp];\n  } else {\n    return this.calendarObj;\n  }\n};\n"],"sourceRoot":"/source/"}