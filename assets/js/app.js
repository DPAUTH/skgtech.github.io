!function e(t,n,a){function r(s,o){if(!n[s]){if(!t[s]){var l="function"==typeof require&&require;if(!o&&l)return l(s,!0);if(i)return i(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[s]={exports:{}};t[s][0].call(c.exports,function(e){var n=t[s][1][e];return r(n?n:e)},c,c.exports,e,t,n,a)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<a.length;s++)r(a[s]);return r}({1:[function(e,t,n){var a=e("./frontpage"),r=e("./slack-invite");e("./newsletter");var i=new a;i.init();var s=new r;s.init({email_container:".slack-subscribe-email",cta:".slack-subscribe-button"})},{"./frontpage":2,"./newsletter":3,"./slack-invite":4}],2:[function(e,t,n){var a=e("calendarth"),r=e("./util"),i=t.exports=function(){this.$agendaContainer=null,this.$agendaItem=null,this.$error=null};i.MAX_EVENTS_SHOW=8,i.prototype.init=function(){this.$agendaContainer=$("#agenda-items"),this.$agendaItem=$("#agenda-tpl"),this.$error=$("#agenda-error"),this.calendarth=a({apiKey:"AIzaSyC75rnKyEkGxmVyG7hlqFicwPBgDmQLN_w",calendarId:"2ul10sd9g30mnk1vpmcnnp5qv4@group.calendar.google.com",maxResults:12}),this.calendarth.fetch(this._handleCalResult.bind(this))},i.prototype._handleCalResult=function(e,t){if(this.$agendaContainer.empty(),e)return void this.$agendaContainer.append(this.$error.clone().removeClass("hide"));var n=[],a=0,r=0,s="";t.items.forEach(function(e){a>=i.MAX_EVENTS_SHOW||n.indexOf(e.summary)>-1||(n.push(e.summary),s+=this._assignValues(this.$agendaItem.clone(),e,r),a++,r++,r>2&&(r=0))},this),s+="",this.$agendaContainer.append(s)},i.prototype._assignValues=function(e,t,n){e.removeClass("hide"),console.log("WTF:",e.find("article.calendar-entry")),e.find("article.calendar-entry").addClass("calendar-entry-"+n),e.find(".title").addClass("title-"+n),e.find(".title").text(t.summary);var a=this._parseDesc(t.description);e.find(".date").text(r.getDate(t.start)),e.find(".time").text(r.getTime(t.start));var i=null,s="";return i=a.venue?a.venue:t.location,i.length>12&&(i=i.substr(0,9)+"..."),a.mapUrl?(s='<a href="'+a.mapUrl+'" target="_blank">',s+=i,s+="</a>"):s=i,e.find(".location-name").html(s),a.infoUrl?e.find(".more-info").attr("href",a.infoUrl):e.find(".more-info").addClass("hide"),a.about?e.find(".details p").html(a.about):e.find(".details").addClass("hide"),e.html()},i.prototype._parseDesc=function(e){var t={venue:null,infoUrl:null,mapUrl:null,about:null,language:null,rest:""};if(!e)return t;var n=e.split("\n");return n.forEach(function(e){if(e.length){var n=e.indexOf(":");if(-1!==n){var a=e.substr(0,n).toLowerCase().trim(),r=e.substr(n+1).trim();switch(a){case"venue":t.venue=r;break;case"info":t.infoUrl=r;break;case"map":t.mapUrl=r;break;case"about":t.about=r;break;case"language":t.language=r;break;default:t.rest+=e+"<br />"}}}},this),t}},{"./util":5,calendarth:7}],3:[function(e,t,n){"use strict";!function(){var e={};e.mceInit=function(){var t={url:"https://datablaster.us2.list-manage.com/subscribe/post-json?u=249dbe460c3c1857a489dde05&amp;id=b926e92856&c=?",type:"GET",dataType:"json",contentType:"application/json; charset=utf-8"};$("#mc-embedded-subscribe-form").submit(function(n){$(".response").hide(),n.preventDefault();var a=this.EMAIL.value;return t.data=$(this).serialize(),t.success=function(t){e.mceSuccess(t,a)},$.ajax(t),!1})},e.mceSuccess=function(e){if("success"===e.result)return $("#mc-embedded-subscribe-form").hide(),void $(".thankyou").removeClass("hide");var t,n=-1;try{var a=e.msg.split(" - ",2);if(void 0===a[1])t=e.msg;else{var r=parseInt(a[0],10);r.toString()===a[0]?(n=a[0],t=a[1]):(n=-1,t=e.msg)}}catch(i){n=-1,t=e.msg}$(".js-error").show(),$(".js-error").html(t)},e.mceInit()}()},{}],4:[function(e,t,n){var a=t.exports=function(){};a.TOKEN="xoxp-3330967421-3332061266-7344001762-99c6a8",a.SUBSCRIBE_URL="https://skgtech.slack.com/api/users.admin.invite",a.prototype.init=function(e){if(!e.email_container)throw"Must set an input element selector";if(!e.cta)throw"Must set a Call to Action element selector";this.$emailEl=$(e.email_container),this.$ctaEl=$(e.cta),this.attachEvents()},a.prototype.attachEvents=function(){var e=this;this.$ctaEl.on("click",function(t){t.preventDefault();var n=e.$emailEl.val();e.subscribe(n,function(t){t&&e.$emailEl.addClass("error")})})},a.prototype.subscribe=function(e,t){return e&&e.length?/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)?void $.ajax({method:"POST",url:a.SUBSCRIBE_URL,data:{email:e,token:a.TOKEN,set_active:!0}}).success(function(e){e.error?"already_in_team"===e.error&&t("already_in_team"):t(null)}).error(function(e){t("err")}):(t("wrong-email"),!1):(t("empty-email"),!1)}},{}],5:[function(e,t,n){var a=t.exports={},r=["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sub"],i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];a.nl2br=function(e){return"string"!=typeof e?"":e.split("\n").join("<br />")},a.formatDate=function(e,t){var n,s,o=!1;e.dateTime?(n=new Date(e.dateTime),s=new Date(t.dateTime)):(o=!0,n=new Date(e.date),s=new Date(t.date),s-=11e6,s=new Date(s));var l=r[n.getDay()];return l+=", "+i[n.getMonth()],l+=" "+n.getDate(),o?l+=n.getDate()===s.getDate()&&n.getMonth()===s.getMonth()?", All day event":" - "+r[s.getDay()]+" "+s.getDate():(l+=" | "+n.getHours()+":"+a.twoDigit(n.getMinutes()),l+=" - "+s.getHours()+":"+a.twoDigit(s.getMinutes())),l},a.getDate=function(e){var t,n=!1;e.dateTime?t=new Date(e.dateTime):(n=!0,t=new Date(e.date));var a="";return a+=t.getDate(),a+=" "+i[t.getMonth()]},a.getTime=function(e){var t,n=!1;e.dateTime?t=new Date(e.dateTime):(n=!0,t=new Date(e.date));var r="";return n?"All Day":(r+=t.getHours(),void(r+=":"+a.twoDigit(t.getMinutes())))},a.twoDigit=function(e){var t=e+"";return 1===t.length?"0"+t:t}},{}],6:[function(e,t,n){var a=e("./item"),r=t.exports=function(e){this.options=e||{},this.apiKey=this.options.apiKey||null,this.calendarId=this.options.calendarId||null,this.maxResults=this.options.maxResults||20};r.prototype.fetch=function(e){var t="https://www.googleapis.com/calendar/v3/calendars/";t+=this.calendarId+"/events?key=",t+=this.apiKey;var n=new Date;t+="&orderBy=startTime",t+="&singleEvents=true",t+="&timeMin="+n.toISOString(),t+="&maxResults="+this.maxResults,$.ajax({type:"GET",url:t,crossDomain:!0,dataType:"json"}).done(function(t){var n=new a(t);e(null,n)}).fail(function(t,n,a){e(a)})},r.prototype.getEventUrl=function(e){var t=e.htmlLink.split("="),n="http://www.google.com/calendar/event?action=TEMPLATE&tmeid=";return n+=t[1],n+="&tmsrc=",n+=encodeURIComponent(e.organizer.email)}},{"./item":8}],7:[function(e,t,n){var a=e("./calendarth");t.exports=function(e){return new a(e)}},{"./calendarth":6}],8:[function(e,t,n){var a=t.exports=function(e){return e};a.prototype.get=function(e){return e?this.calendarObj[e]:this.calendarObj}},{}]},{},[1]);
//# sourceMappingURL=app.js.map