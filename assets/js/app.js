!function e(t,a,n){function r(s,o){if(!a[s]){if(!t[s]){var l="function"==typeof require&&require;if(!o&&l)return l(s,!0);if(i)return i(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=a[s]={exports:{}};t[s][0].call(c.exports,function(e){var a=t[s][1][e];return r(a?a:e)},c,c.exports,e,t,a,n)}return a[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(e,t,a){var n=e("./frontpage"),r=e("./slack-invite");e("./newsletter");var i=new n;i.init();var s=new r;s.init({email_container:".slack-subscribe-email",cta:".slack-subscribe-button",form:".slack-form"})},{"./frontpage":2,"./newsletter":3,"./slack-invite":4}],2:[function(e,t,a){var n=e("calendarth"),r=e("./util"),i=t.exports=function(){this.$agendaContainer=null,this.$agendaItem=null,this.$error=null};i.MAX_EVENTS_SHOW=8,i.prototype.init=function(){this.$agendaContainer=$("#agenda-items"),this.$agendaItem=$("#agenda-tpl"),this.$error=$("#agenda-error"),this.calendarth=n({apiKey:"AIzaSyC75rnKyEkGxmVyG7hlqFicwPBgDmQLN_w",calendarId:"2ul10sd9g30mnk1vpmcnnp5qv4@group.calendar.google.com",maxResults:12}),this.calendarth.fetch(this._handleCalResult.bind(this))},i.prototype._handleCalResult=function(e,t){if(this.$agendaContainer.empty(),e)return void this.$agendaContainer.append(this.$error.clone().removeClass("hide"));var a=[],n=0,r=0,s="";t.items.forEach(function(e){n>=i.MAX_EVENTS_SHOW||a.indexOf(e.summary)>-1||(a.push(e.summary),s+=this._assignValues(this.$agendaItem.clone(),e,r),n++,r++,r>1&&(r=0))},this),s+="",this.$agendaContainer.append(s)},i.prototype._assignValues=function(e,t,a){e.removeClass("hide"),e.find("article.calendar-entry").addClass("calendar-entry-"+a),e.find(".title").addClass("title-"+a),e.find(".title").text(t.summary);var n=this._parseDesc(t.description);e.find(".date").text(r.getDate(t.start)),e.find(".time").text(r.getTime(t.start));var i=null,s="";if(i=n.venue?n.venue:t.location,i.length>80&&(i=i.substr(0,75)+"..."),n.mapUrl?(s='<a href="'+n.mapUrl+'" target="_blank">',s+=i,s+="</a>"):s=i,e.find(".location-name").html(s),n.infoUrl){var o=n.infoUrl,l=o.lastIndexOf("/"),u=e.find(".more-info");if(u.attr("href",o),o.indexOf("meetup.com")>-1){var c="<div class='meetup-rsvp'><a href='"+o+"' data-event='"+l+"' class='mu-rsvp-btn'>RSVP</a></div>";u.after(c)}}else u.addClass("hide");return n.about?e.find(".details p").html(n.about):e.find(".details").addClass("hide"),e.html()},i.prototype._parseDesc=function(e){var t={venue:null,infoUrl:null,mapUrl:null,about:null,language:null,rest:""};if(!e)return t;var a=e.split("\n");return a.forEach(function(e){if(e.length){var a=e.indexOf(":");if(-1!==a){var n=e.substr(0,a).toLowerCase().trim(),r=e.substr(a+1).trim();switch(n){case"venue":t.venue=r;break;case"info":t.infoUrl=r;break;case"map":t.mapUrl=r;break;case"about":t.about=r;break;case"language":t.language=r;break;default:t.rest+=e+"<br />"}}}},this),t}},{"./util":5,calendarth:7}],3:[function(e,t,a){"use strict";!function(){var e={};e.mceInit=function(){var t={url:"https://datablaster.us2.list-manage.com/subscribe/post-json?u=249dbe460c3c1857a489dde05&amp;id=b926e92856&c=?",type:"GET",dataType:"json",contentType:"application/json; charset=utf-8"};$("#mc-embedded-subscribe-form").submit(function(a){$(".response").hide(),a.preventDefault();var n=this.EMAIL.value;return t.data=$(this).serialize(),t.success=function(t){e.mceSuccess(t,n)},$(this).find("button").button("loading"),$.ajax(t),!1})},e.mceSuccess=function(e){if("success"===e.result)return void $(".newsletter").find("button").button("complete");var t,a=-1;try{var n=e.msg.split(" - ",2);if(void 0===n[1])t=e.msg;else{var r=parseInt(n[0],10);r.toString()===n[0]?(a=n[0],t=n[1]):(a=-1,t=e.msg)}}catch(i){a=-1,t=e.msg}$(".newsletter .field").addClass("has-error"),$(".newsletter").find("button").button("reset"),$(".js-error").show(),$(".js-error").html(t)},e.mceInit()}()},{}],4:[function(e,t,a){var n=t.exports=function(){};n.X_API_KEY="DdBItuHAoE1HE36jjEdmh4Pbx8QpCgDh6Te60gnz",n.SUBSCRIBE_URL="https://pv201ybrq8.execute-api.eu-west-1.amazonaws.com/prod/slack",n.prototype.init=function(e){if(!e.email_container)throw"Must set an input element selector";if(!e.cta)throw"Must set a Call to Action element selector";this.$emailEl=$(e.email_container),this.$ctaEl=$(e.cta),this.$formEl=$(e.form),this.attachEvents()},n.prototype.attachEvents=function(){this.$ctaEl.on("click",this.handleFormSubmit.bind(this)),this.$formEl.on("submit",this.handleFormSubmit.bind(this))},n.prototype.handleFormSubmit=function(e){var t=this;e.preventDefault();var a=t.$emailEl.val();t.$ctaEl.button("loading"),t.subscribe(a,function(e){$(".slack-alert").addClass("hidden"),e?("empty-email"===e?($(".slack-form .field").addClass("has-error"),$(".slack-alert.slack-wrong-email").removeClass("hidden")):"wrong-email"===e?($(".slack-form .field").addClass("has-error"),$(".slack-alert.slack-wrong-email").removeClass("hidden")):"already_in_team"===e&&($(".slack-form .field").addClass("has-error"),$(".slack-alert.slack-already-subscribed").removeClass("hidden")),t.$ctaEl.button("reset")):($(".slack-alert.slack-welcome").removeClass("hidden"),t.$ctaEl.button("complete"))})},n.prototype.subscribe=function(e,t){return e&&e.length?/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)?void $.ajax({method:"GET",url:n.SUBSCRIBE_URL,headers:{"x-api-key":n.X_API_KEY},data:{email:e}}).success(function(e){e.error?("already_in_team"===e.error&&t("already_in_team"),"already_invited"===e.error&&t("already_invited")):t(null)}).error(function(e){t("err")}):(t("wrong-email"),!1):(t("empty-email"),!1)}},{}],5:[function(e,t,a){var n=t.exports={},r=["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sub"],i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.nl2br=function(e){return"string"!=typeof e?"":e.split("\n").join("<br />")},n.formatDate=function(e,t){var a,s,o=!1;e.dateTime?(a=new Date(e.dateTime),s=new Date(t.dateTime)):(o=!0,a=new Date(e.date),s=new Date(t.date),s-=11e6,s=new Date(s));var l=r[a.getDay()];return l+=", "+i[a.getMonth()],l+=" "+a.getDate(),o?l+=a.getDate()===s.getDate()&&a.getMonth()===s.getMonth()?", All day event":" - "+r[s.getDay()]+" "+s.getDate():(l+=" | "+a.getHours()+":"+n.twoDigit(a.getMinutes()),l+=" - "+s.getHours()+":"+n.twoDigit(s.getMinutes())),l},n.getDate=function(e){var t,a=!1;e.dateTime?t=new Date(e.dateTime):(a=!0,t=new Date(e.date));var n="";return n+=t.getDate(),n+=" "+i[t.getMonth()]},n.getTime=function(e){var t,a=!1;e.dateTime?t=new Date(e.dateTime):(a=!0,t=new Date(e.date));var r="";return a?"All Day":(r+=t.getHours(),r+=":"+n.twoDigit(t.getMinutes()))},n.twoDigit=function(e){var t=e+"";return 1===t.length?"0"+t:t}},{}],6:[function(e,t,a){var n=e("./item"),r=t.exports=function(e){this.options=e||{},this.apiKey=this.options.apiKey||null,this.calendarId=this.options.calendarId||null,this.maxResults=this.options.maxResults||20};r.prototype.fetch=function(e){var t="https://www.googleapis.com/calendar/v3/calendars/";t+=this.calendarId+"/events?key=",t+=this.apiKey;var a=new Date;t+="&orderBy=startTime",t+="&singleEvents=true",t+="&timeMin="+a.toISOString(),t+="&maxResults="+this.maxResults,$.ajax({type:"GET",url:t,crossDomain:!0,dataType:"json"}).done(function(t){var a=new n(t);e(null,a)}).fail(function(t,a,n){e(n)})},r.prototype.getEventUrl=function(e){var t=e.htmlLink.split("="),a="http://www.google.com/calendar/event?action=TEMPLATE&tmeid=";return a+=t[1],a+="&tmsrc=",a+=encodeURIComponent(e.organizer.email)}},{"./item":8}],7:[function(e,t,a){var n=e("./calendarth");t.exports=function(e){return new n(e)}},{"./calendarth":6}],8:[function(e,t,a){var n=t.exports=function(e){return e};n.prototype.get=function(e){return e?this.calendarObj[e]:this.calendarObj}},{}]},{},[1]);
//# sourceMappingURL=app.js.map
